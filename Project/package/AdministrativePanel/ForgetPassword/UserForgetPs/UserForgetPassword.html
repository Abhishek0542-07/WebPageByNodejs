<!DOCTYPE html>
<html>

<head>
    <title>Forget Password Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/asset/css/bootstrap.min.css">
    <link rel="stylesheet" href="/fontawesome-free-5.15.1-web/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/mainpage/AdministrativePanel/ForgetPassword/UserForgetPs/UserForgetPassword.css">
</head>

<body>
    <div class="FORGET_PASSWORD_DIV">
        <div class="CENTER_DIV">
            <h5>User Reset Password</h5>
            <div class="col-sm">
                <input type="text" placeholder="Enter Email id" id="emailaddress" onfocus="this.value=''; this.style.color='red'" required>
            </div>

            <div class="col-sm">
                <input type="password" placeholder="Enter  Old Password" id="oldpasswordinput" autocomplete="new-password" required>
                <i class="fas fa-eye-slash" id="showpasswordid" onclick="viewPassword();"></i>
            </div>

            <div class="col-sm">
                <input type="password" placeholder="Enter New Password" id="newpasswordinput" required>
            </div>

            <div class="col-sm">
                <button type="submit" class="btn" onclick="savedata(this);">Reset</button>
            </div>
        </div>
    </div>

    <script>
        function savedata(id) {
            var emailid = document.getElementById("emailaddress").value;
            var oldpassword = document.getElementById("oldpasswordinput").value;
            var newpassword = document.getElementById("newpasswordinput").value;

            if (emailid != '' && oldpassword != '' && newpassword != '') {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        alert(this.responseText);
                        // closeForm1();
                    }
                };
                var filepath = "../dbRegistration/RegistrationPagedb/ForgetPasswordDb.php";
                xhr.open("POST", filepath);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhr.send("buttonid=" + id + "&emailid=" + emailid + "&oldpassword=" + oldpassword + "&newpassword=" + newpassword);

            } else {
                alert("Please types text box");
            }
        }

        function openForm() {
            document.getElementById("ForgetPasswordpopupid").style.display = "flex";
        }

        function closeForm1() {
            document.getElementById("ForgetPasswordpopupid").style.display = "none";
        }

        function viewPassword() {
            var passwordInput = document.getElementById('oldpasswordinput');
            var passStatus = document.getElementById('showpasswordid');
            var inputRepeatpassword1 = document.getElementById('newpasswordinput');

            if (passwordInput.type == 'password') {
                passwordInput.type = 'text';
                passStatus.className = 'fa fa-eye';
            } else {
                passwordInput.type = 'password';
                passStatus.className = 'fa fa-eye-slash';
            }

            if (inputRepeatpassword1.type == 'password') {
                inputRepeatpassword1.type = 'text';
            } else {
                inputRepeatpassword1.type = 'password';
            }
        }
    </script>
</body>

</html>